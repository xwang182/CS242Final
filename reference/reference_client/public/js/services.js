var mp4Services=angular.module("mp4Services",[]);mp4Services.value("settingURL","http://localhost:4000/api/"),mp4Services.factory("UserData",function($http,settingURL){$http.defaults.headers.post["Content-Type"]="application/json";var baseURL="http://localhost:4000/api/users/",baseURLQuery="http://localhost:4000/api/users",setting=function(newSetting){settingURL=newSetting,baseURL=newSetting+"users/",baseURLQuery=newSetting+"users"},getURL=function(){return settingURL},getUsers=function(){var usersURL=baseURLQuery+"?select={'name': 1,'email':1}";return $http.get(usersURL).then(function(response){return response.data})},deleteUser=function(userId){return $http["delete"](baseURL+userId).then(function(response){return response.data})},addUser=function(addData){return $http.post(baseURL,addData).then(function(response){return response.data})},getOneUser=function(userId){return $http.get(baseURL+userId).then(function(response){return response.data})};return{getURL:getURL,setting:setting,getUsers:getUsers,deleteUser:deleteUser,addUser:addUser,getOneUser:getOneUser}}),mp4Services.factory("TaskData",function($http,settingURL){$http.defaults.headers.post["Content-Type"]="application/json";var baseURL="http://localhost:4000/api/tasks/",baseURLQuery="http://localhost:4000/api/tasks",setting=function(newSetting){settingURL=newSetting,baseURL=newSetting+"tasks/",baseURLQuery=newSetting+"tasks"},getTasks=function(pageNum,everyPage,taskType,taskSort,sortOrder){var limitNum=everyPage,skipNum=pageNum*limitNum;limitNum=limitNum.toString(),skipNum=skipNum.toString();var selectQuery="?select={'name': 1,'assignedUserName':1,'completed':1}",pageQuery="&skip="+skipNum+"&limit="+limitNum,typeQuery="";"all"===taskType?typeQuery="":"completed"===taskType?typeQuery="&where={'completed': true}":"pending"===taskType&&(typeQuery="&where={'completed': false}");var sortQuery="";"name"===taskSort&&"1"===sortOrder?sortQuery="&sort={ 'name' : 1 }":"name"===taskSort&&"-1"===sortOrder?sortQuery="&sort={ 'name' : -1 }":"assignedUserName"===taskSort&&"1"===sortOrder?sortQuery="&sort={ 'assignedUserName' : 1 }":"assignedUserName"===taskSort&&"-1"===sortOrder?sortQuery="&sort={ 'assignedUserName' : -1 }":"dateCreated"===taskSort&&"1"===sortOrder?sortQuery="&sort={ 'dateCreated' : 1 }":"dateCreated"===taskSort&&"-1"===sortOrder?sortQuery="&sort={ 'dateCreated' : -1 }":"deadline"===taskSort&&"1"===sortOrder?sortQuery="&sort={ 'deadline' : 1 }":"deadline"===taskSort&&"-1"===sortOrder&&(sortQuery="&sort={ 'deadline' : -1 }");var tasksURL=baseURLQuery+selectQuery+pageQuery+typeQuery+sortQuery;return $http.get(tasksURL).then(function(response){return response.data})},getUserTasks=function(userId){var selectQuery="?where={'completed':true,'assignedUser':'"+userId+"'}",userTasksURL=baseURLQuery+selectQuery;return $http.get(userTasksURL).then(function(response){return response.data})},deleteTask=function(taskId){return $http["delete"](baseURL+taskId).then(function(response){return response.data})},addTask=function(addData){return $http.post(baseURL,addData).then(function(response){return response.data})},getOneTask=function(taskId){return $http.get(baseURL+taskId).then(function(response){return response.data})},changeTask=function(taskId,newTask){return $http.put(baseURL+taskId,newTask).then(function(response){return response.data})};return{setting:setting,getTasks:getTasks,getUserTasks:getUserTasks,deleteTask:deleteTask,addTask:addTask,getOneTask:getOneTask,changeTask:changeTask}});